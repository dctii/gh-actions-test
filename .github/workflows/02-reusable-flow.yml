  name: 02-Reusable_Flow
  on:
    workflow_call:
      inputs:
        # Take input from workflow that calls this reusable workflow
        artifact-name:
          type: string
          description: The name of the locust output file
          required: true
      secrets:
        MY_NEW_SECRET:
          required: true
  jobs:
    second-job:
      runs-on: self-hosted
      steps:
        - name: Say something
          run: echo "This is the second job!"

        # Download artifacts
        - name: Get artifacts
          # needs.<JOB_NAME>.steps.<STEP_ID>.outcome
          if: secrets.MY_NEW_SECRET == 'your-secret-goes-here'
          uses: actions/download-artifact@v3
          with:
            name: ${{ inputs.artifact-name }}

        - name: List logs
          run: ls ./logfiles
#
#        # Echo outputs from 'test' job
#        - name: Output filename
#          run: |
#            echo "${{ needs.test.outputs.script-file }}"
#            echo "${{ needs.test.outputs.png-file }}"
#            echo "${{ needs.test.outputs.UPLOAD_ARTIFACTS }}"
#            echo "${{ needs.test.steps.upload_step.outcome }}"

  # We want to run this workflow within another workflow. This is why it is called a 'reusable workflow'